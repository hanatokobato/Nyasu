openapi: 3.0.0
x-stoplight:
  id: 67bms2ggvyzi5
info:
  title: nyasu
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
paths:
  /api/v1/auth/user:
    get:
      summary: Get current user
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/current-user'
        '401':
          $ref: '#/components/responses/unauthorized'
      operationId: get-api-v1-auth-user
      x-stoplight:
        id: ad6temuyucje0
      security:
        - authorization: []
  /api/v1/auth/signup:
    parameters: []
    post:
      summary: Register new user
      operationId: post-api-v1-auth-signup
      responses:
        '200':
          $ref: '#/components/responses/login-success'
      x-stoplight:
        id: j0tmr7x8yp554
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: cesvhty1o7h3x
                  format: email
                password:
                  type: string
                  x-stoplight:
                    id: zhotnztdxpexq
                password_confirm:
                  type: string
                  x-stoplight:
                    id: 9xyy6992olv25
              required:
                - email
                - password
                - password_confirm
  /api/v1/auth/login:
    post:
      summary: Login
      operationId: post-api-v1-auth-login
      responses:
        '200':
          $ref: '#/components/responses/login-success'
      x-stoplight:
        id: pve4b9wwotr3c
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: 71g6ibqrs66zu
                  format: email
                password:
                  type: string
                  x-stoplight:
                    id: 2nu06be12fbhu
              required:
                - email
                - password
  /api/v1/auth/logout:
    delete:
      summary: Logout
      operationId: delete-api-v1-auth-logout
      responses:
        '200':
          $ref: '#/components/responses/delete-success'
      x-stoplight:
        id: tqgbrdec8idnw
      security:
        - authorization: []
  /api/v1/decks:
    get:
      summary: List decks of current user
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/decks-list'
        '401':
          $ref: '#/components/responses/unauthorized'
      operationId: get-api-v1-decks
      x-stoplight:
        id: akix2asdzqdgg
      security:
        - authorization: []
      parameters:
        - schema:
            type: number
          in: query
          name: page
        - schema:
            type: number
          in: query
          name: per_page
        - schema:
            type: string
          in: query
          name: search
    post:
      summary: Create deck
      operationId: post-api-v1-decks
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          $ref: '#/components/responses/unauthorized'
      x-stoplight:
        id: u5xb5oul92282
      description: ''
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  x-stoplight:
                    id: qk2jhtecbmtur
                description:
                  type: string
                  x-stoplight:
                    id: t6kfewfiiedmj
                file:
                  type: string
                  x-stoplight:
                    id: oq14ykt4uuhhn
                  format: binary
              required:
                - name
          application/json:
            schema:
              type: object
              properties: {}
        description: ''
      security:
        - authorization: []
  '/api/v1/decks/{id}':
    get:
      summary: Get deck
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          description: Unauthorized
      operationId: 'get-api-v1-decks-:id'
      x-stoplight:
        id: 86yywl8ax3j3f
      description: ''
      security:
        - authorization: []
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    put:
      summary: Update deck
      operationId: put-api-v1-decks-id
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          $ref: '#/components/responses/unauthorized'
      security:
        - authorization: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  x-stoplight:
                    id: y74tsce4kxr7b
                description:
                  type: string
                  x-stoplight:
                    id: wugp3cn6oghxx
                file:
                  type: string
                  x-stoplight:
                    id: 372hpk7ubjeqg
                  format: binary
    delete:
      summary: Delete deck
      operationId: delete-api-v1-decks-id
      responses:
        '200':
          $ref: '#/components/responses/delete-success'
        '401':
          $ref: '#/components/responses/unauthorized'
      x-stoplight:
        id: 7xt58v7wf0b2m
      security:
        - authorization: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
components:
  schemas:
    current-user:
      title: User
      type: object
      x-examples:
        example:
          id: 56cb91bdc3464f14678934ca
          email: test@example.com
          role: ADMIN
      x-stoplight:
        id: 3umxjq787hak2
      properties:
        id:
          type: integer
          description: Unique identifier for the given user.
          x-stoplight:
            id: oveprx7h234rq
          readOnly: true
        email:
          type: string
          format: email
          x-stoplight:
            id: mbhygb261017d
          readOnly: true
        role:
          x-stoplight:
            id: c359sejujgtn6
          enum:
            - ADMIN
            - USER
          readOnly: true
      required:
        - id
        - email
        - role
    deck-list-item:
      title: deck-list-item
      x-stoplight:
        id: jymrj1tzsxc8u
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: pyfuu1it16uwe
        name:
          type: string
          x-stoplight:
            id: p51tvtdde0vzk
        photo:
          type: string
          x-stoplight:
            id: ltxzw4mvd5fmu
      required:
        - id
        - name
    deck-detail:
      title: deck-detail
      x-stoplight:
        id: qu4i08ff9mfn6
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: pov5v0ju8o121
        name:
          type: string
          x-stoplight:
            id: oyee6habo81od
        photo:
          type: string
          x-stoplight:
            id: tz3nu5542ss6v
  securitySchemes:
    authorization:
      type: http
      scheme: bearer
  responses:
    current-user:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: vxjinfqi2itar
              data:
                type: object
                x-stoplight:
                  id: 4l0ay7bthv5zu
                required:
                  - user
                properties:
                  user:
                    $ref: '#/components/schemas/current-user'
            required:
              - success
              - data
    login-success:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: bep0cuguxc04v
              token:
                type: string
                x-stoplight:
                  id: 5xy6ke9m30m6x
              data:
                type: object
                x-stoplight:
                  id: foze666zldxp0
                required:
                  - user
                properties:
                  user:
                    $ref: '#/components/schemas/current-user'
            required:
              - success
              - token
              - data
    delete-success:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: x2vjuw26wgyj8
            required:
              - success
    decks-list:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: 8ub3l84r3qm90
              data:
                type: object
                x-stoplight:
                  id: eanqq04twc057
                required:
                  - decks
                  - page
                  - total_page
                properties:
                  decks:
                    type: array
                    x-stoplight:
                      id: v2706kgxsiddy
                    items:
                      $ref: '#/components/schemas/deck-list-item'
                  page:
                    type: integer
                    x-stoplight:
                      id: nwn8a3i5bdk3p
                  total_page:
                    type: integer
                    x-stoplight:
                      id: 6f754pt8t7lwn
            required:
              - success
              - data
    deck-detail:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: dimtb8jypoqkv
              data:
                type: object
                x-stoplight:
                  id: 2rciez72n4v4o
                properties:
                  deck:
                    $ref: '#/components/schemas/deck-detail'
        application/xml:
          schema:
            type: object
            properties: {}
    unauthorized:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: 7ldgasy43gzjy
                default: false
              errors:
                type: array
                x-stoplight:
                  id: iu8vtft34554o
                items: {}
