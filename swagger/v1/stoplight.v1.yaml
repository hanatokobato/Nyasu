openapi: 3.0.0
x-stoplight:
  id: uyud55tdhme2t
info:
  title: nyasu
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
paths:
  /api/v1/auth/user:
    get:
      summary: Get current user
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/current-user'
        '401':
          $ref: '#/components/responses/unauthorized'
      operationId: get-api-v1-auth-user
      x-stoplight:
        id: 49fuqmpb2hpy3
      security:
        - authorization: []
  /api/v1/auth/signup:
    parameters: []
    post:
      summary: Register new user
      operationId: post-api-v1-auth-signup
      responses:
        '200':
          $ref: '#/components/responses/login-success'
      x-stoplight:
        id: 6smqs1z9btpmt
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: 5jl26m9zjlmh7
                  format: email
                password:
                  type: string
                  x-stoplight:
                    id: geaqoi0vxgh2q
                password_confirm:
                  type: string
                  x-stoplight:
                    id: qn6te2od60ncf
              required:
                - email
                - password
                - password_confirm
  /api/v1/auth/login:
    post:
      summary: Login
      operationId: post-api-v1-auth-login
      responses:
        '200':
          $ref: '#/components/responses/login-success'
      x-stoplight:
        id: ibcsv7dgepbwu
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  x-stoplight:
                    id: z702wurh517r5
                  format: email
                password:
                  type: string
                  x-stoplight:
                    id: nbn9qhv9mek01
              required:
                - email
                - password
  /api/v1/auth/logout:
    delete:
      summary: Logout
      operationId: delete-api-v1-auth-logout
      responses:
        '200':
          $ref: '#/components/responses/delete-success'
      x-stoplight:
        id: cdbu2f8kp629g
      security:
        - authorization: []
  /api/v1/decks:
    get:
      summary: List decks of current user
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/decks-list'
        '401':
          $ref: '#/components/responses/unauthorized'
      operationId: get-api-v1-decks
      x-stoplight:
        id: exx7emdibfaov
      security:
        - authorization: []
      parameters:
        - schema:
            type: number
          in: query
          name: page
        - schema:
            type: number
          in: query
          name: per_page
        - schema:
            type: string
          in: query
          name: search
    post:
      summary: Create deck
      operationId: post-api-v1-decks
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          $ref: '#/components/responses/unauthorized'
      x-stoplight:
        id: sc1imvl6knb3r
      description: ''
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  x-stoplight:
                    id: bmxxx0gz5iknm
                description:
                  type: string
                  x-stoplight:
                    id: kp9ewh626307m
                file:
                  type: string
                  x-stoplight:
                    id: qou3w2dogzlxp
                  format: binary
              required:
                - name
          application/json:
            schema:
              type: object
              properties: {}
        description: ''
      security:
        - authorization: []
  '/api/v1/decks/{id}':
    get:
      summary: Get deck
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          description: Unauthorized
      operationId: 'get-api-v1-decks-:id'
      x-stoplight:
        id: tx1qnkp4118oc
      description: ''
      security:
        - authorization: []
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    put:
      summary: Update deck
      operationId: put-api-v1-decks-id
      responses:
        '200':
          $ref: '#/components/responses/deck-detail'
        '401':
          $ref: '#/components/responses/unauthorized'
      security:
        - authorization: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                  x-stoplight:
                    id: 98m3563r1hwpm
                description:
                  type: string
                  x-stoplight:
                    id: 5gx9ax8aiy5cc
                file:
                  type: string
                  x-stoplight:
                    id: qs2i5wxdkkya8
                  format: binary
    delete:
      summary: Delete deck
      operationId: delete-api-v1-decks-id
      responses:
        '200':
          $ref: '#/components/responses/delete-success'
        '401':
          $ref: '#/components/responses/unauthorized'
      x-stoplight:
        id: s5sf62aql3n7i
      security:
        - authorization: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
  /api/v1/cards:
    get:
      summary: Get cards list
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/cards-list'
      operationId: get-api-v1-cards
      x-stoplight:
        id: w37j433td0bfd
      security:
        - authorization: []
      parameters:
        - schema:
            type: number
          in: query
          name: page
        - schema:
            type: number
          in: query
          name: per_page
        - schema:
            type: string
          in: query
          name: deck_id
    post:
      summary: Create card
      operationId: post-api-v1-cards
      responses:
        '201':
          $ref: '#/components/responses/card-detail'
      x-stoplight:
        id: 08jjivbsexcz7
      security:
        - authorization: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                deck_id:
                  type: string
                  x-stoplight:
                    id: wj1jn91dh6398
                content:
                  type: object
                  x-stoplight:
                    id: t3us8z40upqfo
                  properties:
                    front:
                      type: string
                      x-stoplight:
                        id: eo6zo3tf66u2f
                    back:
                      type: string
                      x-stoplight:
                        id: h9rsvpchs2bx9
                fields:
                  type: object
                  x-stoplight:
                    id: e7m9ajjs4bpx9
                  properties:
                    word:
                      type: string
                      x-stoplight:
                        id: v67ei7rm01rpf
                    translate:
                      type: string
                      x-stoplight:
                        id: 1mddv20g1tkz9
                    spelling:
                      type: string
                      x-stoplight:
                        id: ggnpbx7eyr4i2
                    example:
                      type: object
                      x-stoplight:
                        id: uj98u9fcl1qsr
                      properties:
                        sentence:
                          type: string
                          x-stoplight:
                            id: uvsxf1tgdqkn9
                        translate:
                          type: string
                          x-stoplight:
                            id: nnc7c0egil348
                file:
                  type: string
                  x-stoplight:
                    id: ew00uks3u859b
                  format: binary
  /api/v1/cards/random:
    get:
      summary: Get random cards
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/random-cards'
      operationId: get-api-v1-cards-random
      x-stoplight:
        id: 06i2m3s8qwwaq
      parameters:
        - schema:
            type: number
          in: query
          name: limit
      security:
        - authorization: []
  /api/v1/learnings:
    get:
      summary: Get learning statistic
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/learnings'
      operationId: get-api-v1-learning-statistic
      x-stoplight:
        id: p6576atz48pf4
      security:
        - authorization: []
      parameters: []
      description: ''
    post:
      summary: Add learning
      operationId: post-api-v1-cards-learning
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    x-stoplight:
                      id: 9xnpjwqq0h7kg
                  data:
                    type: object
                    x-stoplight:
                      id: n0wfev6ivlwjl
      x-stoplight:
        id: gza8fyettfwy5
      description: ''
      security:
        - authorization: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                card_ids:
                  type: array
                  x-stoplight:
                    id: 6pshg0rr3gxyt
                  items:
                    x-stoplight:
                      id: hyzenocps7at5
                    type: string
                deck_id:
                  type: string
                  x-stoplight:
                    id: 501ras7i3jr7o
    put:
      summary: Update learnings
      operationId: put-api-v1-cards-learning
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    x-stoplight:
                      id: uc9xf2ekqsxk6
                  data:
                    type: object
                    x-stoplight:
                      id: 5cxwyme1i5jjl
      x-stoplight:
        id: 6shhbe4ivaqrz
      security:
        - authorization: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                passed_cards:
                  type: array
                  x-stoplight:
                    id: yye93nc1m49zk
                  items:
                    x-stoplight:
                      id: 007oryuvff9pp
                    type: string
                failed_cards:
                  type: array
                  x-stoplight:
                    id: hwtkrsreupajj
                  items:
                    x-stoplight:
                      id: bgkbkakyl1g66
                    type: string
        description: ''
    parameters: []
  '/api/v1/cards/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Card detail
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/card-detail'
      operationId: get-api-v1-cards-id
      x-stoplight:
        id: 295oxdrnd5fcd
      security:
        - authorization: []
    put:
      summary: Update card
      operationId: put-api-v1-cards-id
      responses:
        '202':
          $ref: '#/components/responses/card-detail'
      x-stoplight:
        id: cdj4o71vuxc3x
      security:
        - authorization: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                content:
                  type: object
                  x-stoplight:
                    id: 7s8orpp45e4ka
                  properties:
                    front:
                      type: string
                      x-stoplight:
                        id: 99bcqwl8zv6ac
                    back:
                      type: string
                      x-stoplight:
                        id: cl6s7it7o1v7q
                fields:
                  type: object
                  x-stoplight:
                    id: h9liuwkjwxzgi
                  properties:
                    word:
                      type: string
                      x-stoplight:
                        id: 0kdwfefsgu7fl
                    translate:
                      type: string
                      x-stoplight:
                        id: ru5ocmsth703w
                    spelling:
                      type: string
                      x-stoplight:
                        id: j6hbnge6md8rt
                    example:
                      type: object
                      x-stoplight:
                        id: 1x2ae4cmw1tbp
                      properties:
                        sentence:
                          type: string
                          x-stoplight:
                            id: iya6ene28hrw1
                        translate:
                          type: string
                          x-stoplight:
                            id: d4dfmwql1xfbo
                file:
                  type: string
                  x-stoplight:
                    id: bj4isqarfkxnf
                  format: binary
    delete:
      summary: Delete card
      operationId: delete-api-v1-cards-id
      responses:
        '204':
          $ref: '#/components/responses/delete-success'
      x-stoplight:
        id: 1uee5j5k1thb7
      security:
        - authorization: []
  /api/v1/cards/attachments:
    post:
      summary: Upload card photo
      operationId: post-api-v1-cards-attachments
      responses:
        '201':
          $ref: '#/components/responses/uploaded-photo'
      x-stoplight:
        id: wjs30ujodcuig
      security:
        - authorization: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  x-stoplight:
                    id: taly4752e69up
                  format: binary
  /api/v1/learnings/reviews:
    get:
      summary: Get reviewing cards
      tags: []
      responses:
        '200':
          $ref: '#/components/responses/cards-list'
      operationId: get-api-v1-learnings-reviews
      x-stoplight:
        id: q8abt0c8dauly
      security:
        - authorization: []
  /api/v1/cards/learning:
    get:
      summary: Get learning cards
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    x-stoplight:
                      id: dbw7bcxemcr56
                  data:
                    type: object
                    x-stoplight:
                      id: t5uvfxxnegupa
                    required:
                      - cards
                    properties:
                      cards:
                        type: array
                        x-stoplight:
                          id: ufjjevuw825nm
                        items:
                          $ref: '#/components/schemas/card'
                required:
                  - data
      operationId: get-api-v1-cards-learning
      x-stoplight:
        id: 3ry765u8c3m1q
      security:
        - authorization: []
      parameters:
        - schema:
            type: string
          in: query
          name: deck_id
          required: true
components:
  schemas:
    current-user:
      title: User
      type: object
      x-examples:
        example:
          id: 56cb91bdc3464f14678934ca
          email: test@example.com
          role: ADMIN
      x-stoplight:
        id: al7miur3xizkj
      properties:
        id:
          type: integer
          description: Unique identifier for the given user.
          x-stoplight:
            id: 1k4g5ebd2rax5
          readOnly: true
        email:
          type: string
          format: email
          x-stoplight:
            id: e7qqguadr2qc7
          readOnly: true
        role:
          x-stoplight:
            id: x9o9ilxrmsh0p
          enum:
            - ADMIN
            - USER
          readOnly: true
      required:
        - id
        - email
        - role
    deck-list-item:
      title: deck-list-item
      x-stoplight:
        id: fy2lf86cjxgkr
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: fnyy7inn4owf5
        name:
          type: string
          x-stoplight:
            id: lb02shlqszb37
        photo_url:
          type: string
          x-stoplight:
            id: 2wz8jsa3vpds5
        has_unlearned_card:
          type: boolean
          x-stoplight:
            id: w9g3lqvmajwew
        description:
          type: string
          x-stoplight:
            id: 1xrz3d3z5iw2s
      required:
        - id
        - name
    deck-detail:
      title: deck-detail
      x-stoplight:
        id: paj7uetnt4p77
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: was2kvd6qrchk
        name:
          type: string
          x-stoplight:
            id: gnv3rz6hgcryc
        photo:
          type: string
          x-stoplight:
            id: d8kd9cv1eilng
    card:
      title: card
      x-stoplight:
        id: 9fi1e52g44egf
      type: object
      properties:
        id:
          type: string
          x-stoplight:
            id: j063vvb3kphe5
        deck_id:
          type: string
          x-stoplight:
            id: mcpbpss12ou21
        content:
          type: object
          x-stoplight:
            id: 75jfma4ujgion
          required:
            - front
            - back
          properties:
            front:
              type: string
              x-stoplight:
                id: slokeb9svceg1
            back:
              type: string
              x-stoplight:
                id: lugvmtlz1i9ne
        fields:
          type: object
          x-stoplight:
            id: 518pl76fplppb
          required:
            - word
            - translate
            - spelling
            - example
          properties:
            word:
              type: string
              x-stoplight:
                id: hj443xo9fz2wu
            translate:
              type: string
              x-stoplight:
                id: ns0r9borw917h
            spelling:
              type: string
              x-stoplight:
                id: gs9yyd1kshwys
            example:
              type: object
              x-stoplight:
                id: cz4poo4p24y13
              required:
                - sentence
              properties:
                sentence:
                  type: string
                  x-stoplight:
                    id: 3i2vzwecm64aa
                translate:
                  type: string
                  x-stoplight:
                    id: 2vg92rjnwxvm4
        audioUrl:
          type: string
          x-stoplight:
            id: avxr7pryw2wuq
      required:
        - id
        - content
        - fields
  securitySchemes:
    authorization:
      type: http
      scheme: bearer
  responses:
    current-user:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: nzps8at5qr6gz
              data:
                type: object
                x-stoplight:
                  id: ijqrpbuqtvdc2
                required:
                  - user
                properties:
                  user:
                    $ref: '#/components/schemas/current-user'
            required:
              - success
              - data
    login-success:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: b9xlez03img5v
              token:
                type: string
                x-stoplight:
                  id: 4ji5husgh13qr
              data:
                type: object
                x-stoplight:
                  id: 22hhzrpajzyfj
                required:
                  - user
                properties:
                  user:
                    $ref: '#/components/schemas/current-user'
            required:
              - success
              - token
              - data
    delete-success:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: yhm3whilgva9r
            required:
              - success
    decks-list:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: atvyba2eh38vk
              data:
                type: object
                x-stoplight:
                  id: 7mum72nzil42v
                required:
                  - decks
                  - page
                  - total_page
                properties:
                  decks:
                    type: array
                    x-stoplight:
                      id: nwm4p3e9gb20j
                    items:
                      $ref: '#/components/schemas/deck-list-item'
                  page:
                    type: integer
                    x-stoplight:
                      id: ukr7xe470rrs8
                  total_page:
                    type: integer
                    x-stoplight:
                      id: t52n7sqcfpk7s
            required:
              - success
              - data
    deck-detail:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: v326kxip8juoy
              data:
                type: object
                x-stoplight:
                  id: 013p8xscn2wux
                properties:
                  deck:
                    $ref: '#/components/schemas/deck-detail'
        application/xml:
          schema:
            type: object
            properties: {}
    unauthorized:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: fahog56lu8zhn
                default: false
              errors:
                type: array
                x-stoplight:
                  id: jt1hkmmoh9drf
                items: {}
    cards-list:
      description: Example response
      content:
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: qywkkfxsbuslz
              data:
                type: object
                x-stoplight:
                  id: swty8jhqr2dbl
                properties:
                  cards:
                    type: array
                    x-stoplight:
                      id: 7py21h2654lc6
                    items:
                      $ref: '#/components/schemas/card'
                  page:
                    type: integer
                    x-stoplight:
                      id: cbvq4gbh9c4ji
                  total_page:
                    type: integer
                    x-stoplight:
                      id: rta95n5ohcfda
        multipart/form-data:
          schema:
            type: object
            properties: {}
        text/html:
          schema:
            type: object
            properties: {}
    card-detail:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: uehokdausxece
              data:
                type: object
                x-stoplight:
                  id: 0o68ipjjqgewi
                properties:
                  card:
                    $ref: '#/components/schemas/card'
    random-cards:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: eo50mt4wxersj
              data:
                type: object
                x-stoplight:
                  id: of5oz53v2rek4
                properties:
                  cards:
                    type: array
                    x-stoplight:
                      id: zhy75mra663c7
                    items:
                      $ref: '#/components/schemas/card'
    reviewing-cards:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: 6v69s42bryu98
              data:
                type: object
                x-stoplight:
                  id: cccy6suoqg9ui
                properties:
                  cards:
                    type: array
                    x-stoplight:
                      id: pci0dttixrv63
                    items:
                      $ref: '#/components/schemas/card'
    uploaded-photo:
      description: Example response
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
        application/xml:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: c5uai8rs5a7yj
              data:
                type: object
                x-stoplight:
                  id: ne4wye9c1bjip
                properties:
                  attachment:
                    type: object
                    x-stoplight:
                      id: taqpncedwtxap
                    properties:
                      name:
                        type: string
                        x-stoplight:
                          id: ef4h2hygcwh3w
                      path:
                        type: string
                        x-stoplight:
                          id: qc1w16pi37lbe
    learnings:
      description: Example response
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                x-stoplight:
                  id: 1aeb7r0jyddqq
              data:
                type: object
                x-stoplight:
                  id: udrzhrfekth9j
                properties:
                  word_levels:
                    type: object
                    x-stoplight:
                      id: x5v5wxoovh9kc
                    required:
                      - level_1
                      - level_2
                      - level_3
                      - level_4
                      - level_5
                    properties:
                      level_1:
                        type: integer
                        x-stoplight:
                          id: 6zrvp8cvrx70h
                      level_2:
                        type: integer
                        x-stoplight:
                          id: 8tij33hjz17fb
                      level_3:
                        type: integer
                        x-stoplight:
                          id: vmw946gunxzyw
                      level_4:
                        type: integer
                        x-stoplight:
                          id: vu7qoyut5xlas
                      level_5:
                        type: integer
                        x-stoplight:
                          id: kajy6zvmdptsz
                  curr_review_count:
                    type: integer
                    x-stoplight:
                      id: f1oguz2ml2l4w
                  wait_review_count:
                    type: integer
                    x-stoplight:
                      id: bzcm6q9im8xxh
                  upcoming:
                    type: string
                    x-stoplight:
                      id: y7yuuzde1rk47
                    format: date-time
                required:
                  - word_levels
                  - curr_review_count
                  - wait_review_count
                  - upcoming
